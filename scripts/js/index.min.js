!function(e,t,o,s){"use strict";function i(){this._quickList=".quick-list",this._lHeader=".l-header",this._lNav=".l-nav",this._lFooter=".l-footer",this._mCut=".m-cut",this._pagination=".pagination",this._slideDown=".jq-slide-down",this._slideCut=".jq-slide-cut",this._subOwl=".sub-owl",this._locationList=".location-list",this._sectionIndex=0,this._sectionScroll=!0,this._once=!0,this._mCutHeight=projects.$w.height(),this._isYouTube}var n=new i;i.prototype.checkCutLength=function(){if($(n._mCut).length>1){for(var e="",t=0;t<$(n._mCut).length;t++)e+='<li class="list"><button class="btn-dot jq-slide-cut"></button></li>';$(n._pagination).find(".cut-dot").html(e).find("> *").eq(0).addClass("is-curr"),projects.$hb.animate({scrollTop:0},50)}},i.prototype.slideCut=function(e,t){var o=$(n._quickList).height(),s=$(n._lHeader).height(),i=$(n._lNav).height(),a=$(n._lFooter).height();0===e?projects.$hb.animate({scrollTop:0},2*common._animateSpeed):e===$(n._mCut).length-1?t!==-1?projects._browsers.msie&&11===projects._browsers.version?projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a+o*($(n._mCut).length-2)},common._animateSpeed).animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a+o*($(n._mCut).length-2)+400},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a+o*($(n._mCut).length-2)},2*common._animateSpeed):projects._browsers.msie&&11===projects._browsers.version?parseInt($(common._lBody).attr("data-cut"),10)!==$(n._mCut).length&&projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a},common._animateSpeed).animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a+400},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a},2*common._animateSpeed):t<-1?projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s},2*common._animateSpeed):t<0&&t>=-1?projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-i},2*common._animateSpeed):t>1?projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a},2*common._animateSpeed):e===$(n._mCut).length-2?projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a*e},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(e).offset().top-s+a*(e-1)},2*common._animateSpeed),t>0?$(common._lBody).addClass("scrollUp").removeClass("scrollDown"):$(common._lBody).addClass("scrollDown").removeClass("scrollUp"),$(n._pagination).find(".cut-dot .list").removeClass("is-curr").eq(e).addClass("is-curr"),n._isYouTube&&0!==e&&"undefined"!=typeof projects._media._player.pauseVideo?projects._media._player.pauseVideo():n._isYouTube&&0===e&&"undefined"!=typeof projects._media._player.playVideo&&"PC"===projects.device()&&projects._media._player.playVideo(),$(common._lBody).attr("data-cut",e+1)},i.prototype.mousewheel=function(){projects.mousewheel(projects.$hb,function(e){if(!$(e.target).is(".sub-menu, .sub-menu *, .search-result-list, .search-result-list *, .popup-function, .popup-function *")&&(e.preventDefault(),e.stopPropagation(),n._sectionScroll)){if(n._sectionScroll=!1,n._sectionIndex=$(n._pagination).find(".cut-dot .list.is-curr").index(),e.deltaY<0?n._sectionIndex++:n._sectionIndex--,n._sectionIndex>=$(n._mCut).length-1?n._sectionIndex=$(n._mCut).length-1:n._sectionIndex<=0&&(n._sectionIndex=0),projects._ISMAC)var t=1400;else var t=common._animateSpeed;n.slideCut(n._sectionIndex,e.deltaY),setTimeout(function(){n._sectionScroll=!0},t+100)}})},i.prototype.iniBranchList=function(e,t){var o=e,s=t,i=$("#gpsLocation").val(),a="";$.ajax({type:"GET",url:i+"?GpsX="+s+"&GpsY="+o,dataType:"json",success:function(e){if(0==s&&0==o){$(".jQ-brandlist-head").html("請選擇要進入的分店，由北至南排序如下："),$(".jQ-brandlist-note").html("");for(var t=0;t<e.length;t++)a+='<li class="list"><a href="'+e[t].Url+'" class="b-link b-block b-bold-sm"><em class="name">'+e[t].Name+"</em></a></li>"}else{$(".jQ-brandlist-head").html("請選擇要進入的分店，依距離遠近排序如下："),$(".jQ-brandlist-note").html("* 貼心提醒 : 公里數為直線定位距離，並非行駛距離");for(var t=0;t<e.length;t++)a+='<li class="list"><a href="'+e[t].Url+'" class="b-link b-block b-bold-sm"><em class="name">'+e[t].Name+'</em><span class="distance">'+e[t].Distance.toFixed(2)+"km</span></a></li>"}$(n._locationList).html(a)},complete:function(e){}})},i.prototype.geolocation=function(){var t=$("#defaultBranchUrl").val();t&&(e.location.href=t),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(e){n.iniBranchList(e.coords.latitude,e.coords.longitude)},function(){n.iniBranchList(0,0)}):alert("Browser doesn't support Geolocation")},i.prototype.onresize=function(){detectZoom.device()>=1.5?$(common._lBody).addClass("scale-150"):detectZoom.device()>=1.25&&$(common._lBody).addClass("scale-125")},projects.$w.load(function(){projects._browsers.msie?setTimeout(function(){n.checkCutLength()},500):n.checkCutLength(),$(common._owl).each(function(){$(this).on("translated.owl.carousel",function(e){$(this).find(".active .item").hasClass("is-dark")?$(this).addClass("is-dark").removeClass("is-light"):$(this).addClass("is-light").removeClass("is-dark")})}),$(".social-wall").masonry({itemSelector:".list-item",columnWidth:".item-sizer",gutter:20}),$(n._slideDown).on("click",function(){n.slideCut(1)}),$(n._pagination).on("click",n._slideCut,function(){n.slideCut($(this).parent(".list").index(),$(this).parent().siblings(".is-curr").index()-$(this).parent().index())}),$(n._subOwl+" .arrow").each(function(){$(this).css("border-bottom-color",$(this).parents(".item").css("background-color"))}),$(common._owl).hover(function(){$(this).trigger("stop.owl.autoplay")},function(){$(this).trigger("play.owl.autoplay",[5e3])})}),projects.$d.ready(function(){n.onresize(),"PC"===projects.device()?(n.mousewheel(),n.iniBranchList(0,0)):(n.geolocation(),$(common._select).removeClass("m-replace-select"))}),projects.$w.on("scroll",function(){"PC"===projects.device()&&n.mousewheel()}),projects.$b.on("touchmove",function(e){var t;t=projects._ISIPHONE?$(common._lBody).scrollTop():projects.$w.scrollTop(),$(n._pagination).find(".cut-dot .list").removeClass("is-curr").eq(Math.floor(t/projects.$w.height())).addClass("is-curr")}),projects.$w.resize(function(){"Mobile"!==projects.device()&&e.location.reload()}),e.indexObj||(e.indexObj=n)}(window,document,$);
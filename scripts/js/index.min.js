!function(t,e,o,s){"use strict";function i(){this._quickList=".quick-list",this._lNav=".l-nav",this._lFooter=".l-footer",this._mCut=".m-cut",this._pagination=".pagination",this._slideDown=".jq-slide-down",this._slideCut=".jq-slide-cut",this._subOwl=".sub-owl",this._locationList=".location-list",this._sectionIndex=0,this._sectionScroll=!0,this._once=!0,this._mCutHeight=projects.$w.height(),this._isYouTube}var n=new i;i.prototype.checkCutLength=function(){if($(n._mCut).length>1){for(var t="",e=0;e<$(n._mCut).length;e++)t+='<li class="list"><button class="btn-dot jq-slide-cut"></button></li>';$(n._pagination).find(".cut-dot").html(t).find("> *").eq(0).addClass("is-curr"),projects.$hb.animate({scrollTop:0},50)}},i.prototype.slideCut=function(t,e){var o=$(n._quickList).height(),s=$(n._lNav).height(),i=$(n._lFooter).height();0===t?projects.$hb.animate({scrollTop:0},2*common._animateSpeed):t===$(n._mCut).length-1?e!==-1?projects._browsers.msie&&11===projects._browsers.version?projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i+o*($(n._mCut).length-2)},common._animateSpeed).animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i+o*($(n._mCut).length-2)+400},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i+o*($(n._mCut).length-2)},2*common._animateSpeed):projects._browsers.msie&&11===projects._browsers.version?parseInt($(common._lBody).attr("data-cut"),10)!==$(n._mCut).length&&projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i},common._animateSpeed).animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i+400},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i},2*common._animateSpeed):e<-1?projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+o},2*common._animateSpeed):e<0&&e>=-1?projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s},2*common._animateSpeed):e>1?projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i},2*common._animateSpeed):t===$(n._mCut).length-2?projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i*t},2*common._animateSpeed):projects.$hb.animate({scrollTop:$(n._mCut).eq(t).offset().top-s+i*(t-1)},2*common._animateSpeed),e>0?$(common._lBody).addClass("scrollUp").removeClass("scrollDown"):$(common._lBody).addClass("scrollDown").removeClass("scrollUp"),$(n._pagination).find(".cut-dot .list").removeClass("is-curr").eq(t).addClass("is-curr"),n._isYouTube&&0!==t&&"undefined"!=typeof projects._media._player.pauseVideo?projects._media._player.pauseVideo():n._isYouTube&&0===t&&"undefined"!=typeof projects._media._player.playVideo&&"PC"===projects.device()&&projects._media._player.playVideo(),$(common._lBody).attr("data-cut",t+1)},i.prototype.mousewheel=function(){projects.mousewheel(projects.$hb,function(t){if(!$(t.target).is(".sub-menu, .sub-menu *, .search-result-list, .search-result-list *, .popup-function, .popup-function *")&&(t.preventDefault(),t.stopPropagation(),n._sectionScroll)){if(n._sectionScroll=!1,n._sectionIndex=$(n._pagination).find(".cut-dot .list.is-curr").index(),t.deltaY<0?n._sectionIndex++:n._sectionIndex--,n._sectionIndex>=$(n._mCut).length-1?n._sectionIndex=$(n._mCut).length-1:n._sectionIndex<=0&&(n._sectionIndex=0),projects._ISMAC)var e=1400;else var e=common._animateSpeed;n.slideCut(n._sectionIndex,t.deltaY),setTimeout(function(){n._sectionScroll=!0},e+100)}})},i.prototype.iniBranchList=function(t,e){var o=t,s=e,i=$("#gpsLocation").val(),a="";$.ajax({type:"GET",url:i+"?GpsX="+s+"&GpsY="+o,dataType:"json",success:function(t){if(0==s&&0==o){$(".jQ-brandlist-head").html("請選擇要進入的分店，由北至南排序如下："),$(".jQ-brandlist-note").html("");for(var e=0;e<t.length;e++)a+='<li class="list"><a href="'+t[e].Url+'" class="b-link b-block b-bold"><em class="name">'+t[e].Name+"</em></a></li>"}else{$(".jQ-brandlist-head").html("請選擇要進入的分店，依距離遠近排序如下："),$(".jQ-brandlist-note").html("* 貼心提醒 : 公里數為直線定位距離，並非行駛距離");for(var e=0;e<t.length;e++)a+='<li class="list"><a href="'+t[e].Url+'" class="b-link b-block b-bold"><em class="name">'+t[e].Name+'</em><span class="distance">'+t[e].Distance.toFixed(2)+"km</span></a></li>"}$(n._locationList).html(a)},complete:function(t){}})},i.prototype.geolocation=function(){var e=$("#defaultBranchUrl").val();e&&(t.location.href=e),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){n.iniBranchList(t.coords.latitude,t.coords.longitude)},function(){n.iniBranchList(0,0)}):alert("Browser doesn't support Geolocation")},i.prototype.onresize=function(){detectZoom.device()>=1.5?$(common._lBody).addClass("scale-150"):detectZoom.device()>=1.25&&$(common._lBody).addClass("scale-125")},projects.$w.load(function(){projects._browsers.msie?setTimeout(function(){n.checkCutLength()},500):n.checkCutLength(),$(common._owl).each(function(){$(this).on("translated.owl.carousel",function(t){$(this).find(".active .item").hasClass("is-dark")?$(this).addClass("is-dark").removeClass("is-light"):$(this).addClass("is-light").removeClass("is-dark")})}),$(".social-wall").masonry({itemSelector:".list-item",columnWidth:".item-sizer",gutter:20}),$(n._slideDown).on("click",function(){n.slideCut(1)}),$(n._pagination).on("click",n._slideCut,function(){n.slideCut($(this).parent(".list").index(),$(this).parent().siblings(".is-curr").index()-$(this).parent().index())}),$(n._subOwl+" .arrow").each(function(){$(this).css("border-bottom-color",$(this).parents(".item").css("background-color"))}),$(common._owl).hover(function(){$(this).trigger("stop.owl.autoplay")},function(){$(this).trigger("play.owl.autoplay",[5e3])})}),projects.$d.ready(function(){n.onresize(),"PC"===projects.device()?(n.mousewheel(),n.iniBranchList(0,0)):(n.geolocation(),$(common._select).removeClass("m-replace-select"))}),projects.$w.on("scroll",function(){"PC"===projects.device()&&n.mousewheel()}),projects.$b.on("touchmove",function(t){var e;e=projects._ISIPHONE?$(common._lBody).scrollTop():projects.$w.scrollTop(),$(n._pagination).find(".cut-dot .list").removeClass("is-curr").eq(Math.floor(e/projects.$w.height())).addClass("is-curr")}),projects.$w.resize(function(){"Mobile"!==projects.device()&&t.location.reload()}),t.indexObj||(t.indexObj=n)}(window,document,$);
!function(e,t,n,i){"use strict";function a(){this._defaultWidth="PC"!==projects.device()?"MT":"P",this._display="",this._autoCenter=!1,this._testValue=!1,this._mViewport=".magazine-viewport",this._container=".container",this._magazine=".magazine",this._thumbnails=".thumbnails",this._fullScreen=".jQ-full-screen",this._totalPage=$(this._thumbnails+" img").length,this._userAgent=navigator.userAgent||navigator.vendor||e.opera,this._iOS=/iPad|iPhone|iPod/.test(this._userAgent)&&!e.MSStream,this._largeWidth=2214,this._imgSrc=$(this._thumbnails+" img").eq(0).attr("src"),this._imgSrcArray=this._imgSrc.split("/"),this._newImage=new Image,this._aspectRatio=0,this.escTip,this._bookPlaying}var o=new a;a.prototype.prepare=function(){o._newImage.onload=function(){o._aspectRatio=o._newImage.width/o._newImage.height,"PC"!==projects.device()?($(o._container).width(o._aspectRatio*$(o._mViewport).height()),o._display="single"):($(o._container).width(o._aspectRatio*$(o._mViewport).height()*2),$(o._magazine).css("left",-$(o._container).width()/2),o._display="double",o._autoCenter=!0),$(o._magazine).turn({autoCenter:o._autoCenter,display:o._display,duration:1e3,elevation:100,gradients:!0,width:$(o._container).width(),height:$(o._mViewport).height(),pages:o._totalPage,when:{turning:function(t,n,a){var s=$(this),r=s.turn("page")>=10?s.turn("page"):"0"+s.turn("page"),l=(s.turn("pages")>=10?s.turn("pages"):"0"+s.turn("pages"),n>=10?n:"0"+n);"undefined"!=typeof history.pushState&&history.pushState(null,null,e.location.href.split("#")[0]+"#page"+n),disableControls(n),"PC"!==projects.device()?($(".thumbnails .page-"+r).parent("figure").removeClass("current"),$(".thumbnails .page-"+l).parent("figure").addClass("current")):($(".thumbnails .page-"+r).parents("li").removeClass("current"),$(".thumbnails .page-"+l).parents("li").addClass("current")),0===a[0]?$(".jQ-pages").text(a[1]+"/"+o._totalPage):0===a[1]||a[1]===i?$(".jQ-pages").text(a[0]+"/"+o._totalPage):$(".jQ-pages").text(a[0]+"~"+a[1]+"/"+o._totalPage),$(common._loading).addClass("is-hide")},turned:function(e,t,n){disableControls(t),$(this).turn("center"),1==t&&$(this).turn("peel","br"),0===n[0]?$(".jQ-pages").text(n[1]+"/"+o._totalPage):1===n[0]&&$(".jQ-pages").text(n[0]+"/"+o._totalPage),$(common._loading).addClass("is-hide")},missing:function(e,t){for(var n=0;n<t.length;n++)addPage(t[n],$(this))}}}),o.zoomFunction()},o._newImage.src=o._imgSrc},a.prototype.toggleFullScreen=function(e){var n=$(e);o._iOS?(n.toggleClass("fullScreen"),$(o._magazine).turn("destroy"),o.prepare(),o.anchorFunction()):t.fullScreenElement!==i&&null===t.fullScreenElement||t.msFullscreenElement!==i&&null===t.msFullscreenElement||t.mozFullScreen!==i&&!t.mozFullScreen||t.webkitIsFullScreen!==i&&!t.webkitIsFullScreen?n[0].requestFullScreen?n[0].requestFullScreen():n[0].mozRequestFullScreen?n[0].mozRequestFullScreen():n[0].webkitRequestFullScreen?n[0].webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):n[0].msRequestFullscreen&&n[0].msRequestFullscreen():t.cancelFullScreen?t.cancelFullScreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitCancelFullScreen?t.webkitCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen()},a.prototype.setNewSrc=function(){$(o._thumbnails+" img").each(function(){_newSrc.push($(this).attr("src"))})},a.prototype.zoomFunction=function(){$(o._mViewport).zoom({flipbook:$(o._magazine),max:function(){return"PC"!==projects.device()?o._largeWidth/2/$(o._magazine).width():o._largeWidth/$(o._magazine).width()},when:{swipeLeft:function(){$(this).zoom("flipbook").turn("next")},swipeRight:function(){$(this).zoom("flipbook").turn("previous")},resize:function(e,t,n,i){},zoomIn:function(){$(o._magazine).removeClass("animated").addClass("zoom-in"),$(".zoom-icon").removeClass("zoom-icon-in").addClass("zoom-icon-out"),e.escTip||$.isTouch||(o.escTip=!0,$("<div />",{class:"exit-message"}).html("<div>Press ESC to exit</div>").appendTo($("body")).delay(2e3).animate({opacity:0},500,function(){$(this).remove()})),"PC"!==projects.device()&&($(o._container).draggable(),$(o._container).draggable("enable"))},zoomOut:function(){"PC"===projects.device()?$(o._magazine).turn("options").width=o._aspectRatio*$(o._container).height()*2:($(o._magazine).turn("options").width=o._aspectRatio*$(o._container).height(),$(o._container).attr("style","").draggable("disable"),$(o._container).width(o._aspectRatio*$(o._mViewport).height())),$(o._magazine).turn("options").height=$(o._mViewport).height(),$(".exit-message").hide(),$(".zoom-icon").removeClass("zoom-icon-out").addClass("zoom-icon-in"),setTimeout(function(){$(o._magazine).addClass("animated").removeClass("zoom-in"),resizeViewport()},0)}}})},a.prototype.anchorFunction=function(){e.location.href.split("#page")[1]!==i?($(o._magazine).turn("is")&&$(o._magazine).turn("page",e.location.href.split("#page")[1]),"PC"!==projects.device()?$(".thumbnails .page-"+e.location.href.split("#page")[1]).parent("figure").addClass("current"):$(".thumbnails .page-"+e.location.href.split("#page")[1]).parents("li").addClass("current")):($(o._magazine).turn("is")&&$(o._magazine).turn("page",1),"PC"!==projects.device()?$(".thumbnails .page-01").parent("figure").addClass("current"):$(".thumbnails .page-01").parents("li").addClass("current"))},projects.$w.load(function(){}),projects.$d.ready(function(){o.setNewSrc(),o.prepare(),o.anchorFunction(),$.isTouch?$(o._mViewport).on("zoom.doubleTap",zoomTo):$(o._mViewport).on("zoom.tap",zoomTo),$(t).keydown(function(e){var t=37,n=39,i=27;switch(e.keyCode){case t:$(o._magazine).turn("previous"),e.preventDefault();break;case n:$(o._magazine).turn("next"),e.preventDefault();break;case i:$(o._mViewport).zoom("zoomOut"),e.preventDefault()}}),$(o._thumbnails).click(function(e){var t;e.target&&(t=/page-([0-9]+)/.exec($(e.target).attr("class")))&&$(o._magazine).turn("page",t[1]),$(o._thumbnails).removeClass("show"),$(".jQ-show-list").removeClass("is-active")}),$(".next-button").on("click",function(){$(o._magazine).turn("next")}),$(".previous-button").on("click",function(){$(o._magazine).turn("previous")}),$(".first-button").on("click",function(){$(o._magazine).turn("page",1)}),$(".last-button").on("click",function(){$(o._magazine).turn("page",o._totalPage)}),$(".zoom-icon").on("click",function(){$(this).hasClass("zoom-icon-in")?$(o._mViewport).zoom("zoomIn"):$(this).hasClass("zoom-icon-out")&&$(o._mViewport).zoom("zoomOut")}),$(".jQ-show-list").on("click",function(){$(o._thumbnails).toggleClass("show"),$(this).toggleClass("is-active")}),$(o._fullScreen).on("click",function(){o.toggleFullScreen(".main-content")}),$(o._magazine).dblclick(function(){$(o._mViewport).zoom("zoomOut")}),projects.$d.on("webkitfullscreenchange mozfullscreenchange fullscreenchange msfullscreenchange",function(e){o._testValue=!o._testValue,$(".main-content").toggleClass("fullScreen"),$(o._fullScreen).toggleClass("is-active"),$(o._magazine).turn("destroy"),o.prepare(),o.anchorFunction()})}),projects.$w.resize(function(){"PC"===projects.device()&&o._testValue===!1&&($(o._container).width(o._aspectRatio*$(o._mViewport).height()*2),$(o._magazine).css("left",-$(o._container).width()/2),o._display="double"),("MT"===o._defaultWidth&&projects.$w.width()>=1e3||"P"===o._defaultWidth&&projects.$w.width()<1e3)&&($(o._magazine).turn("destroy"),o.prepare(),o._defaultWidth=projects.$w.width()<1e3?"MT":"P"),$(o._magazine).turn("size",$(o._container).width(),$(o._container).height())}),e.pageObj||(e.pageObj=o)}(window,document,$);
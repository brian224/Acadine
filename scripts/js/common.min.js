!function(e,t,i,a){"use strict";function s(){this._lBody=".l-body",this._lHeader=".l-header",this._lContent=".l-content",this._owl=".jQ-owl",this._countHeight=".jQ-count-height",this._btnTop=".jQ-top",this._select=".jQ-select",this._menu=".jQ-menu",this._subMenu=".jQ-sub-menu",this._sideMenu=".jQ-side-menu",this._video=".jQ-video",this._mute=".jQ-mute",this._tab=".jQ-tab",this._btnAccordion=".jQ-btn-accordion",this._checkbox=".jQ-checkbox",this._radio=".jQ-radio",this._calc=".jQ-calc",this._tagSelect=".jQ-tag-select",this._share=".jQ-share",this._browserAdj=".jQ-browserAdj",this._adjHeight=".jQ-adjHeight",this._clearInput=".jQ-clear-input",this._openBox=".jQ-open-box",this._closeBox=".jQ-close-box",this._btnFunc=".jQ-btn-func",this._btnMarquee=".jQ-btn-marquee",this._langSwitch=".jQ-lang-switch",this._closePopup=".jQ-close-popup",this._sendMsg=".jQ-send-msg",this._btnSearch=".jQ-btn-search",this._btnOpen=".jQ-open-calendar",this._btnClose=".jQ-close-calendar",this._btnFinish=".jQ-finish",this._btnNext=".jQ-next",this._addingWrap=".m-adding-wrap",this._shortcutWrap=".shortcut-wrap",this._teachOwl=".teach-owl",this._teachWrap=".m-teach",this._leavePage=!1,this._animateSpeed=400,this._masonryLoad=!1}var o=new s;s.prototype.selectUI=function(){$(o._select).each(function(){var e=$(this),t="";t=0!==e.find(".is-selected").length?"html"===e.data("structure")?e.find(".is-selected").html():e.find(".is-selected").text():"html"===e.data("structure")?e.find(".list").eq(0).html():e.find(".list").eq(0).text(),e.find(".m-selected-item").html(t),e.on("click",function(){e.toggleClass("is-active"),o.offClick(o._select)}),e.find(".list").on("click",function(){$(this).addClass("is-selected").siblings().removeClass("is-selected"),"html"===e.data("structure")?e.find(".m-selected-item").html($(this).html()):e.find(".m-selected-item").html($(this).text())})})},s.prototype.teachLesson=function(){"true"!==localStorage.getItem("teach-lesson")&&0!==$(o._teachWrap).length&&$(o._lBody).addClass("show-teach")},s.prototype.offClick=function(e){projects.$d.off("click").on("click",function(t){t.stopPropagation(),".m-lightbox-content"===e?(t.stopPropagation(),!$(t.target).is(o._openBox+", "+o._openBox+" *,"+e+", "+e+" *")&&$(t.target).data("callback")!==!0&&$(o._lBody).hasClass("show-lightbox")&&o.closeBoxEvent()):".jQ-category"===e?$(t.target).is(e+", "+e+" *")||$(e).removeClass("is-active"):".popup-function"===e?$(t.target).is(e+", "+e+" *, "+o._btnFunc+", "+o._btnFunc+" *")||$(e).prev().removeClass("show-func"):e===o._select?$(t.target).is(e+", "+e+" *")||$(e).removeClass("is-active"):".calendar-box"===e&&($(t.target).is(e+", "+e+" *, "+o._addingWrap+", "+o._addingWrap+" *")||$(o._addingWrap).removeClass("is-open"))})},s.prototype.showFooter=function(){var e=projects._browsers.msie&&9===projects._browsers.version?projects.$b.height():projects.$hb.height(),t=projects.$w.height(),i=projects.$w.scrollTop();if(e<=t+Math.ceil(i)){if($(o._lBody).addClass("show-footer"),$(o._lBody).hasClass("branch")&&!o._masonryLoad&&"true"===localStorage.getItem("teach-lesson")){var a=$(pageObj._masonryArray.join(""));$(".social-wall").append(a).masonry("appended",a),o._masonryLoad=!0}}else i<=70?$(o._lBody).addClass("show-header"):$(o._lBody).removeClass("show-header show-footer")},s.prototype.headerHeight=function(){$(o._countHeight).each(function(){for(var e=$(this).find(".list"),t=$(this).data("column"),i=Math.ceil(e.length/t),a=0;a<=i;a++)$(this).find("> .list:lt("+i+")").wrapAll('<div class="list-block"></div>')})},s.prototype.pauseVideo=function(){$(o._video).each(function(){if($(this).offset().top+$(this).height()<projects.$w.scrollTop()+parseInt($(o._lContent).css("padding-top"),10)||o._leavePage===!0)for(var e=0;e<projects._media._player.length;e++){if(!projects._media._player[e].getPlayerState)return!1;1===projects._media._player[e].getPlayerState()&&projects._media._player[e].pauseVideo(),$("[data-media]").eq(e).attr("data-media",$("[data-media]").eq(e).attr("data-media").replace(/autoplay=1/,"autoplay=0"))}})},s.prototype.returnPage=function(){$(o._video).each(function(){if($(this).parents(".owl-item").hasClass("active")&&$(this).offset().top+$(this).height()>projects.$w.scrollTop()+parseInt($(o._lContent).css("padding-top"),10))for(var e=0;e<projects._media._player.length;e++){if(!projects._media._player[e].getPlayerState)return!1;2!==projects._media._player[e].getPlayerState()||$(this).hasClass("is-pause")||(projects._media._player[e].playVideo(),$("[data-media]").eq(e).attr("data-media",$("[data-media]").eq(e).attr("data-media").replace(/autoplay=0/,"autoplay=1")))}})},s.prototype.touchLock=function(e){$(o._owl).on("touchmove touchend",function(t){projects.$w.scrollTop(e)})},s.prototype.selectInputCheck=function(){0!==$('input[type="radio"]:checked').length&&$(o._radio).each(function(){if(0!==$(this).find('input[type="radio"]:checked').length){var e=$(this).find('input[type="radio"]:checked').attr("name");$('input[type="radio"][name="'+e+'"]').parents(o._radio).removeClass("is-checked"),$(this).addClass("is-checked")}})},s.prototype.changeToSelect=function(){$(o._tagSelect).each(function(){var e=$(this),t='<select class="m-selection">',i=[],a=0!==e.find(".is-curr").length?e.find(".is-curr").parent().index():0;if(0!==e.find("button").length)for(var s=0;s<e.find("> *").length;s++)t+='<option value="" class="jQ-tab">'+e.find("> *").eq(s).text()+"</option>";else if(0!==e.find("a").length)for(var s=0;s<e.find("a.b-link").length;s++)t+='<option value="'+e.find("a.b-link").eq(s).attr("href")+'">'+e.find("a.b-link").eq(s).text()+"</option>";if(t+="</select>","food"===e.data("case")){for(var s=0;s<e.find("> *").length;s++)i.push(e.find("> *").eq(s).find(".icon-wrap")[0].outerHTML);t+='<div class="m-selected-item b-hide-dt b-text-center"></div>',e.html(t+i[a]).find("option").eq(a).attr("selected","selected"),e.find(".m-selected-item").text(e.find("option").eq(a).text())}else e.html(t).find("option").eq(a).attr("selected","selected");e.on("change",".m-selection",function(){var t=$(this).find("option:selected").index();"food"===e.data("case")&&($(this).siblings(".icon-wrap").remove(),$(this).siblings(".m-selected-item").text($(this).find("option:selected").text()),$(this).parent().append(i[t])),$(this).parents(".m-tab-wrap").siblings(".m-tab-content").children(".content-list").eq(t).addClass("is-curr").siblings().removeClass("is-curr")})})},s.prototype.openWin=function(t){var i=t.data("height")?(e.screen.availHeight-t.data("height"))/2:(e.screen.availHeight-600)/2,a=t.data("width")?(e.screen.availLeft||e.screenX)+projects.$d.width()/2-t.data("width")/2:(e.screen.availLeft||e.screenX)+projects.$d.width()/2-300,s=t.data("width")||600,o=t.data("height")||600,n=t.data("menu-bar")||"no",c=t.data("title-bar")||"no",r=t.data("status")||"no";e.open(""+t.attr("href"),"","top="+i+", left="+a+", width="+s+", height="+o+", menubar="+n+", titlebar="+c+", status="+r,!1)},s.prototype.totalHeight=function(){$(o._browserAdj).each(function(){var e=$(this).find(o._adjHeight);if(e.attr("style",""),navigator.userAgent.indexOf("MSIE 9")>0){var t=0;e.each(function(){t<$(this).height()&&(t=$(this).height())}),e.each(function(){$(this).height(t)})}else e.each(function(){$(this).height($(this).parent().height())})})},s.prototype.tabSwitch=function(e,t){$(o._tab).each(function(){if($(this).hasClass(e)){var i=$(this).data("main"),s=$(this).data("sub");i!==a&&$(".l-main .main-tab > .m-tab-wrap > .tab-list").eq(i).find(o._tab).trigger("click"),s!==a&&$(this).parents(".sub-tab").find("> .m-tab-wrap > .tab-list").eq(s).find(o._tab).trigger("click"),$(this).trigger("click"),t!==a&&$(o._btnAccordion+'[data-hushtag="'+t+'"]').trigger("click")}}),projects.$w.animate({scrollTop:$(o._lContent+" .main-tab").offset().top-$(o._lHeader).height()},o._animateSpeed)},s.prototype.openBoxEvent=function(){$(o._lBody).addClass("show-lightbox"),o.offClick(".m-lightbox-content")},s.prototype.closeBoxEvent=function(){navigator.userAgent.indexOf("MSIE 9")>0?$(o._lBody).removeClass("show-lightbox"):$(o._lBody).addClass("fade-out").on("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend",function(){$(o._lBody).removeClass("show-lightbox fade-out").off("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend")}),0!==$(".m-lightbox-content form").length&&$(".m-lightbox-content form").validate().resetForm()},s.prototype.sendServiceMsg=function(){var e=$(".chat-wrap");e.append('<div class="msg-wrap user b-clearfix"><figure class="head-img-wrap img-wrap b-float-right"><img src="../../content/img/shared/heads/user.png" alt=""></figure><p class="msg-wording b-inline b-float-right b-text-left">'+$(o._sendMsg+" .m-inputbox").val()+"</p></div>"),$(o._sendMsg+" .m-inputbox").val(""),$(".function-bd").scrollTop(e[0].scrollHeight)},s.prototype.mobileHeaderReset=function(){var e=$(o._shortcutWrap)[0].outerHTML;$(o._shortcutWrap).remove(),$(".header-wrap").append(e)},s.prototype.btnFavorite=function(e,t){t===!0?$(e).addClass("is-add show-text").find(".text").text("已加入收藏"):$(e).removeClass("is-add").addClass("show-text").find(".text").text("已取消收藏"),$(e).find(".text").delay(1500).queue(function(){$(this).dequeue(),$(e).removeClass("show-text")})},s.prototype.btnGoogleCalendsr=function(e){$(e).parent(".calendar-box").prev(".btn-calendar").addClass("is-add"),alert("已加入行事曆"),$(e).parent().parent(o._addingWrap).removeClass("is-open")},projects.$w.load(function(){o.headerHeight(),o.showFooter(),projects.owlCarousel(o._owl),projects._HREF.split("?")[1]!==a&&0!==$(".main-tab").length&&o.tabSwitch(projects._HREF.split("?")[1].split("&")[0],projects._HREF.split("&")[1])}),projects.$d.ready(function(){o.selectInputCheck(),o.teachLesson(),"readed"===sessionStorage.getItem("marquee")&&$(o._lBody).removeClass("show-marquee"),"Mobile"===projects.device()&&(0!==$(o._shortcutWrap).length&&o.mobileHeaderReset(),$(o._owl).on("drag.owl.carousel",function(){o.touchLock(projects.$w.scrollTop())}),$(o._owl).on("translated.owl.carousel",function(){$(o._owl).off("touchmove touchend")}),$(o._sideMenu).removeClass("is-active"),0!==$(o._tagSelect).length&&o.changeToSelect(),$(o._lBody).hasClass("show-marquee")&&$(o._lContent).css("padding-top",$(".marquee-wrap").outerHeight()+parseInt($(o._lContent).css("padding-top"),10))),(projects._browsers.safari===!0&&projects._browsers.chrome===!1||navigator.userAgent.indexOf("MSIE 9")>0)&&"Mobile"!==projects.device()&&o.totalHeight(),0!==$(o._video).length&&(e.onblur=e.onfocusout=e.onpagehide=function(){o._leavePage=!0,o.pauseVideo()},e.onfocus=e.onfocusin=e.onpageshow=function(){o._leavePage=!1,o.returnPage()}),o.selectUI(),$(o._btnFinish).on("click",function(){localStorage.setItem("teach-lesson",!0),$(o._lBody).addClass("fade-out").on("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend",function(){$(o._lBody).removeClass("show-teach").off("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend"),$(o._teachWrap).remove()})}),$(o._btnNext).on("click",function(){"Mobile"!==projects.device()?$(o._teachWrap).attr("data-step",$(this).data("next")):projects.owlNext(o._teachOwl)}),projects.owlEvents(o._teachOwl,"changed.owl.carousel",function(e){var t=e.item.index;t===e.item.count-1?$(o._teachOwl).next(".btn-wrap").addClass("end-owl"):$(o._teachOwl).next(".btn-wrap").removeClass("end-owl")}),$(o._btnTop).on("click",function(){projects.$hb.animate({scrollTop:0},o._animateSpeed),$(o._lBody).hasClass("index")&&($(o._lBody).attr("data-cut",1),$(".pagination").find(".cut-dot .list").removeClass("is-curr").eq(0).addClass("is-curr"))}),$(o._menu).on("click",function(){$(o._lHeader+" .header-wrap").toggleClass("is-active")}),$(o._langSwitch).on("click",function(){"Mobile"===projects.device()&&$(this).parent().toggleClass("is-active")}),$(o._sideMenu).on("click",function(){"Mobile"===projects.device()&&$(".function-list").hasClass("hide-menu")?($(".function-list").removeClass("hide-menu"),$(".show-func").removeClass("show-func")):($(this).toggleClass("is-active"),$(this).hasClass("is-active")?$(".collapse-wrap").on("webkitTransitionEnd oTransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(this).off("webkitTransitionEnd oTransitionend oTransitionEnd msTransitionEnd transitionend"),$(o._lBody).addClass("is-padding-arrow")}):$(o._lBody).removeClass("is-padding-arrow"))}),$(o._subMenu).on("click",function(){"Mobile"===projects.device()&&$(this).toggleClass("is-curr")}),$(o._video).on("click",function(){if($(this).parents(".owl-item").hasClass("active")){var e=$(this).find(".m-youtube-append").attr("id").split("m-youtube-")[1];1!==projects._media._player[e].getPlayerState()?($(this).removeClass("is-pause"),$(this).parent().attr("data-media",$(this).parent().attr("data-media").replace(/autoplay=0/,"autoplay=1")),projects._media._player[e].playVideo()):($(this).addClass("is-pause"),$(this).parent().attr("data-media",$(this).parent().attr("data-media").replace(/autoplay=1/,"autoplay=0")),projects._media._player[e].pauseVideo())}}),$(o._mute).on("click",function(){var e=$(this).prevAll(o._video).find(".m-youtube-append").attr("id").split("m-youtube-")[1];$(this).hasClass("is-mute")?($(this).removeClass("is-mute"),projects._media._player[e].unMute()):($(this).addClass("is-mute"),projects._media._player[e].mute())}),$(o._tab).on("click",function(){var e=$(this).parent().index();$(this).addClass("is-curr").parent().siblings().find(o._tab).removeClass("is-curr"),$(this).parents(".m-tab-wrap").siblings(".m-tab-content").children(".content-list").eq(e).addClass("is-curr").siblings().removeClass("is-curr"),$(this).attr("data-hushtag")!==a&&history.pushState!==a&&history.pushState("",t.title,projects._HREF.split("?")[0]+"?"+$(this).attr("data-hushtag")),0!==$(o._browserAdj).length&&o.totalHeight(),$(o._lBody).hasClass("foods-index")&&$(this).data("kv-switch")===!0&&$(".kv-tab-content").children(".content-list").eq(e).addClass("is-curr").siblings().removeClass("is-curr")}),$(o._btnAccordion).on("click",function(){$(this).parents(".m-accordion").toggleClass("is-open"),"PC"===projects.device()&&$(this).parents(".m-accordion").siblings().removeClass("is-open"),$(this).attr("data-hushtag")!==a&&history.pushState("",t.title,projects._HREF.split("&")[0]+"&"+$(this).attr("data-hushtag"))}),$(o._lBody).on("click",o._checkbox,function(){if($(this).data("select-all")===!0){var e=$(this).data("gruop-name");0===$(this).find('input[type="checkbox"]:checked').length?($(this).addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0),$('[data-select-name="'+e+'"]').addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0)):($(this).removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1),$('[data-select-name="'+e+'"]').removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1))}else 0===$(this).find('input[type="checkbox"]:checked').length?$(this).addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0):$(this).removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1)}),$(o._lBody).on("click",o._radio,function(){if(0!==$(this).find('input[type="radio"]:checked').length){var e=$(this).find('input[type="radio"]:checked').attr("name");$('input[type="radio"][name="'+e+'"]').parents(o._radio).removeClass("is-checked"),$('input[type="radio"][name="'+e+'"]').parent().removeClass("error"),$(this).addClass("is-checked")}$(this).parent().hasClass("deliver-method")&&("store"===$(this).data("deliver")?$(this).parent().addClass("is-store").find(".m-selection").prop("disabled",""):$(this).parent().removeClass("is-store").find(".m-selection").prop("disabled","disabled")),$(this).parents(".m-tab-wrap").hasClass("invoice-selection")&&($(this).parents(".m-tab-wrap").next(".m-tab-content").find(".content-list").find("input, select").prop("disabled","disabled"),$(this).parents(".m-tab-wrap").next(".m-tab-content").find(".content-list").eq($(this).parent().index()).find("input, select").prop("disabled",""))}),$(o._lBody).on("click",o._calc,function(){var e=parseInt($(this).siblings(".m-box-holder").find(".m-inputbox").val(),10);"minus"===$(this).data("calc")?e<=2?$(this).siblings(".m-box-holder").find(".m-inputbox").val(1):$(this).siblings(".m-box-holder").find(".m-inputbox").val(e-1):$(this).siblings(".m-box-holder").find(".m-inputbox").val(e+1)}),$(o._clearInput).on("click",function(){$(".jQ-clear-area .m-inputbox").val("")}),$(o._share).on("click",function(e){e.preventDefault(),o.openWin($(this))}),$(o._openBox).on("click",function(){o.openBoxEvent()}),$(o._closeBox).on("click",function(){o.closeBoxEvent()}),$(o._btnFunc).on("click",function(){$(this).hasClass("show-func")?$(this).removeClass("show-func"):($(".show-func").removeClass("show-func"),$(this).addClass("show-func")),$(this).data("sidebar-close")===!0&&$(o._sideMenu).removeClass("is-active"),"aside"!==$(this).data("place")&&$(o._lBody).removeClass("is-padding-arrow"),$(o._addingWrap).hasClass("is-open")&&$(o._addingWrap).removeClass("is-open"),"Mobile"===projects.device()&&("aside"===$(this).data("place")?$(this).parents(".function-list").addClass("hide-menu"):$(".quick-list .is-active").removeClass("is-active")),o.offClick(".popup-function")}),$(o._closePopup).on("click",function(){$(this).parents(".popup-function").prev().removeClass("show-func"),"Mobile"===projects.device()&&$(".function-list").removeClass("hide-menu")}),$(o._btnMarquee).on("click",function(){$(o._lBody).removeClass("show-marquee"),sessionStorage.setItem("marquee","readed"),"Mobile"===projects.device()&&$(o._lContent).css("padding-top","")}),$(o._btnSearch).on("click",function(){""!==$(this).prev("input").val()&&(e.location.href=$(this).data("url")+"?keyword="+$(this).prev("input").val())}),$(o._lBody).on("click",o._btnOpen,function(){$(this).parent(o._addingWrap).hasClass("is-open")?$(this).parent(o._addingWrap).removeClass("is-open"):($(o._addingWrap).removeClass("is-open"),$(this).parent(o._addingWrap).addClass("is-open"),o.offClick(".calendar-box"),projects.$w.scrollTop()>$(this).next(".calendar-box").offset().top-$(o._lHeader).height()&&projects.$hb.animate({scrollTop:$(this).next(".calendar-box").offset().top-$(o._lHeader).height()},o._animateSpeed)),$(".show-func").removeClass("show-func")}),$(o._lBody).on("click",o._btnClose,function(){$(this).parent().parent(o._addingWrap).removeClass("is-open")}),$(o._tagSelect).on("change","select",function(){""!==$(this).val()&&"javascript:;"!==$(this).val()&&"#"!==$(this).val()&&(e.location.href=$(this).val())}),projects.$d.keydown(function(e){27===e.keyCode&&$(o._lBody).hasClass("show-lightbox")&&o.closeBoxEvent()})}),projects.$w.on("scroll",function(){o.showFooter(),o.pauseVideo()}),projects.$w.resize(function(){"Mobile"!==projects.device()?o.showFooter():0!==$(o._tagSelect).length&&"select"!==$(o._tagSelect).children().prop("tagName").toLowerCase()&&o.changeToSelect()}),e.common||(e.common=o)}(window,document,$);
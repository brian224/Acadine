!function(t,e,i,s){"use strict";function a(){this._lBody=".l-body",this._lHeader=".l-header",this._lContent=".l-content",this._owl=".jQ-owl",this._countHeight=".jQ-count-height",this._btnTop=".jQ-top",this._select=".jQ-select",this._menu=".jQ-menu",this._subMenu=".jQ-sub-menu",this._sideMenu=".jQ-side-menu",this._video=".jQ-video",this._mute=".jQ-mute",this._tab=".jQ-tab",this._like=".jQ-like",this._calendar=".jQ-calendar",this._btnAccordion=".jQ-btn-accordion",this._checkbox=".jQ-checkbox",this._radio=".jQ-radio",this._calc=".jQ-calc",this._tagSelect=".jQ-tag-select",this._share=".jQ-share",this._browserAdj=".jQ-browserAdj",this._adjHeight=".jQ-adjHeight",this._clearInput=".jQ-clear-input",this._openBox=".jQ-open-box",this._closeBox=".jQ-close-box",this._btnFunc=".jQ-btn-func",this._btnMarquee=".jQ-btn-marquee",this._langSwitch=".jQ-lang-switch",this._closePopup=".jQ-close-popup",this._sendMsg=".jQ-send-msg",this._shortcutWrap=".shortcut-wrap",this._leavePage=!1,this._animateSpeed=400,this._masonryLoad=!1}var o=new a;a.prototype.selectUI=function(){$(o._select).each(function(){var t=$(this),e="";e=0!==t.find(".is-selected").length?"html"===t.data("structure")?t.find(".is-selected").html():t.find(".is-selected").text():"html"===t.data("structure")?t.find(".list").eq(0).html():t.find(".list").eq(0).text(),t.find(".m-selected-item").html(e),t.on("click",function(){t.toggleClass("is-active"),o.offClick(o._select)}),t.find(".list").on("click",function(){$(this).addClass("is-selected").siblings().removeClass("is-selected"),"html"===t.data("structure")?t.find(".m-selected-item").html($(this).html()):t.find(".m-selected-item").html($(this).text())})})},a.prototype.offClick=function(t){projects.$d.off("click").on("click",function(e){e.stopPropagation(),".m-lightbox-content"===t?(e.stopPropagation(),!$(e.target).is(o._openBox+", "+o._openBox+" *,"+t+", "+t+" *")&&$(o._lBody).hasClass("show-lightbox")&&o.closeBoxEvent()):".jQ-category"===t?$(e.target).is(t+", "+t+" *")||$(t).removeClass("is-active"):".popup-function"===t&&($(e.target).is(t+", "+t+" *, "+o._btnFunc+", "+o._btnFunc+" *")||$(t).prev().removeClass("show-func"))})},a.prototype.showFooter=function(){var t=projects._browsers.msie&&9===projects._browsers.version?projects.$b.height():projects.$hb.height(),e=projects.$w.height(),i=projects._browsers.chrome||projects._browsers.safari?projects.$b.scrollTop():projects.$hb.scrollTop();if(t<=e+Math.ceil(i)){if($(o._lBody).addClass("show-footer"),$(o._lBody).hasClass("branch")&&!o._masonryLoad){var s=$('<li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/09.png" alt=""><figcaption class="desc">是時候來點下午茶囉！ 喝茶也要很時尚是時候來點下午茶囉！ 喝茶也要很時尚是時候來點下午茶囉！ 喝茶也要很時尚</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-facebook"><figure class="img-wrap"><img src="../../content/img/branch/social/10.jpg" alt=""><figcaption class="desc">歡慶週年慶，小編極力爭取限量雲朵家族來店禮抽獎唷！【遠百IG限定活動】 完成下列兩個步驟，即符合抽獎資格 1. 追蹤遠百IG帳號 。</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/11.jpg" alt=""><figcaption class="desc">是時候來點下午茶囉！ 喝茶也要很時尚</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-facebook"><figure class="img-wrap"><img src="../../content/img/branch/social/12.jpg" alt=""><figcaption class="desc">歡慶週年慶，小編極力爭取限量雲朵家族來店禮抽獎唷！【遠百IG限定活動】 完成下列兩個步驟，即符合抽獎資格 1. 追蹤遠百IG帳號 。</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/13.jpg" alt=""><figcaption class="desc">是時候來點下午茶囉！ 喝茶也要很時尚</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/14.jpg" alt=""><figcaption class="desc">歡慶週年慶，小編極力爭取限量雲朵家族來店禮抽獎唷！【遠百IG限定活動】 完成下列兩個步驟，即符合抽獎資格 1. 追蹤遠百IG帳號 。</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/15.jpg" alt=""><figcaption class="desc">是時候來點下午茶囉！ 喝茶也要很時尚</figcaption></figure></a></li><li class="list-item"><a href="javascript:;" class="b-link from-instagram"><figure class="img-wrap"><img src="../../content/img/branch/social/16.jpg" alt=""><figcaption class="desc">歡慶週年慶，小編極力爭取限量雲朵家族來店禮抽獎唷！【遠百IG限定活動】 完成下列兩個步驟，即符合抽獎資格 1. 追蹤遠百IG帳號 。</figcaption></figure></a></li>');$(".social-wall").append(s).masonry("appended",s),o._masonryLoad=!0}}else i<=70?$(o._lBody).addClass("show-header"):$(o._lBody).removeClass("show-header show-footer")},a.prototype.headerHeight=function(){$(o._countHeight).each(function(){for(var t=$(this).find(".list"),e=$(this).data("column"),i=Math.ceil(t.length/e),s=0;s<=i;s++)$(this).find("> .list:lt("+i+")").wrapAll('<div class="list-block"></div>')})},a.prototype.pauseVideo=function(){$(o._video).each(function(){if($(this).offset().top+$(this).height()<projects.$w.scrollTop()+parseInt($(o._lContent).css("padding-top"),10)||o._leavePage===!0)for(var t=0;t<projects._media._player.length;t++){if(!projects._media._player[t].getPlayerState)return!1;1===projects._media._player[t].getPlayerState()&&projects._media._player[t].pauseVideo(),$("[data-media]").eq(t).attr("data-media",$("[data-media]").eq(t).attr("data-media").replace(/autoplay=1/,"autoplay=0"))}})},a.prototype.returnPage=function(){$(o._video).each(function(){if($(this).parents(".owl-item").hasClass("active")&&$(this).offset().top+$(this).height()>projects.$w.scrollTop()+parseInt($(o._lContent).css("padding-top"),10))for(var t=0;t<projects._media._player.length;t++){if(!projects._media._player[t].getPlayerState)return!1;2===projects._media._player[t].getPlayerState()&&(projects._media._player[t].playVideo(),$("[data-media]").eq(t).attr("data-media",$("[data-media]").eq(t).attr("data-media").replace(/autoplay=0/,"autoplay=1")))}})},a.prototype.touchLock=function(t){$(o._owl).on("touchmove touchend",function(e){projects.$b.scrollTop(t)})},a.prototype.selectInputCheck=function(){0!==$('input[type="radio"]:checked').length&&$(o._radio).each(function(){if(0!==$(this).find('input[type="radio"]:checked').length){var t=$(this).find('input[type="radio"]:checked').attr("name");$('input[type="radio"][name="'+t+'"]').parents(o._radio).removeClass("is-checked"),$(this).addClass("is-checked")}})},a.prototype.changeToSelect=function(){$(o._tagSelect).each(function(){var t=$(this),e='<select class="m-selection">',i=0!==t.find(".is-curr").length?t.find(".is-curr").parent().index():0;if(0!==t.find("button").length)for(var s=0;s<t.find("> *").length;s++)e+='<option value="" class="jQ-tab">'+t.find("> *").eq(s).text()+"</option>";else if(0!==t.find("a").length)for(var s=0;s<t.find("a.b-link").length;s++)e+='<option value="'+t.find("a.b-link").eq(s).attr("href")+'">'+t.find("a.b-link").eq(s).text()+"</option>";e+="</select>",t.html(e).find("option").eq(i).attr("selected","selected"),t.on("change",".m-selection",function(){var t=$(this).find("option:selected").index();$(this).parents(".m-tab-wrap").siblings(".m-tab-content").children(".content-list").eq(t).addClass("is-curr").siblings().removeClass("is-curr")})})},a.prototype.openWin=function(e){var i=e.data("height")?(t.screen.availHeight-e.data("height"))/2:(t.screen.availHeight-600)/2,s=e.data("width")?(t.screen.availLeft||t.screenX)+projects.$d.width()/2-e.data("width")/2:(t.screen.availLeft||t.screenX)+projects.$d.width()/2-300,a=e.data("width")||600,o=e.data("height")||600,n=e.data("menu-bar")||"no",c=e.data("title-bar")||"no",r=e.data("status")||"no";t.open(""+e.attr("href"),"","top="+i+", left="+s+", width="+a+", height="+o+", menubar="+n+", titlebar="+c+", status="+r,!1)},a.prototype.totalHeight=function(){$(o._browserAdj).each(function(){if($(o._adjHeight).attr("style",""),navigator.appVersion.indexOf("MSIE 9")!==-1){var t=0;$(this).find(o._adjHeight).each(function(){t<$(this).height()&&(t=$(this).height())}),$(this).find(o._adjHeight).each(function(){$(this).height(t)})}else $(this).find(o._adjHeight).each(function(){$(this).height($(this).parent().height())})})},a.prototype.tabSwitch=function(t,e){$(o._tab).each(function(){if($(this).hasClass(t)){var i=$(this).data("main"),a=$(this).data("sub");i!==s&&$(".main-tab > .m-tab-wrap > .tab-list").eq(i).find(o._tab).trigger("click"),a!==s&&$(this).parents(".sub-tab").find("> .m-tab-wrap > .tab-list").eq(a).find(o._tab).trigger("click"),$(this).trigger("click"),e!==s&&$(o._btnAccordion+'[data-hushtag="'+e+'"]').trigger("click")}}),projects.$hb.animate({scrollTop:$(".main-tab").offset().top-$(o._lHeader).height()},o._animateSpeed)},a.prototype.closeBoxEvent=function(){navigator.userAgent.indexOf("MSIE 9")>0?$(o._lBody).removeClass("show-lightbox"):$(o._lBody).addClass("fade-out").on("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend",function(){$(o._lBody).removeClass("show-lightbox fade-out").off("webkitAnimationEnd oAnimationend oAnimationEnd msAnimationEnd animationend")})},a.prototype.sendServiceMsg=function(){var t=$(".chat-wrap");t.append('<div class="msg-wrap user b-clearfix"><figure class="head-img-wrap img-wrap b-float-right"><img src="../../content/img/shared/heads/user.png" alt=""></figure><p class="msg-wording b-inline b-float-right b-text-left">'+$(o._sendMsg+" .m-inputbox").val()+"</p></div>"),$(o._sendMsg+" .m-inputbox").val(""),$(".function-bd").scrollTop(t[0].scrollHeight)},a.prototype.mobileHeaderReset=function(){var t=$(o._shortcutWrap)[0].outerHTML;$(o._shortcutWrap).remove(),$(".header-wrap").append(t)},projects.$w.load(function(){o.headerHeight(),o.showFooter(),projects._HREF.split("#")[1]!==s&&0!==$(".main-tab").length&&o.tabSwitch(projects._HREF.split("#")[1].split("&")[0],projects._HREF.split("&")[1])}),projects.$d.ready(function(){projects.owlCarousel(o._owl),o.selectInputCheck(),"readed"===sessionStorage.getItem("marquee")&&$(o._lBody).removeClass("show-marquee"),"Mobile"===projects.device()&&(o.mobileHeaderReset(),$(o._owl).on("drag.owl.carousel",function(){o.touchLock($("body").scrollTop())}),$(o._owl).on("translated.owl.carousel",function(){$(o._owl).off("touchmove touchend")}),$(o._sideMenu).removeClass("is-active"),0!==$(o._tagSelect).length&&o.changeToSelect(),$(o._lBody).hasClass("show-marquee")&&$(o._lContent).css("padding-top",$(".marquee-wrap").height()+parseInt($(o._lContent).css("padding-top"),10))),(projects._browsers.safari===!0&&projects._browsers.chrome===!1||projects._browsers.msie===!0)&&o.totalHeight(),0!==$(o._video).length&&(t.onblur=t.onfocusout=t.onpagehide=function(){o._leavePage=!0,o.pauseVideo()},t.onfocus=t.onfocusin=t.onpageshow=function(){o._leavePage=!1,o.returnPage()}),o.selectUI(),$(o._btnTop).on("click",function(){projects.$hb.animate({scrollTop:0},o._animateSpeed),$(o._lBody).hasClass("index")&&($(o._lBody).attr("data-cut",1),$(".pagination").find(".cut-dot .list").removeClass("is-curr").eq(0).addClass("is-curr"))}),$(o._menu).on("click",function(){$(o._lHeader+" .header-wrap").toggleClass("is-active")}),$(o._langSwitch).on("click",function(){"Mobile"===projects.device()&&$(this).parent().toggleClass("is-active")}),$(o._sideMenu).on("click",function(){"Mobile"===projects.device()&&$(".function-list").hasClass("hide-menu")?($(".function-list").removeClass("hide-menu"),$(".show-func").removeClass("show-func")):($(this).toggleClass("is-active"),$(this).hasClass("is-active")?$(".collapse-wrap").on("webkitTransitionEnd oTransitionend oTransitionEnd msTransitionEnd transitionend",function(){$(this).off("webkitTransitionEnd oTransitionend oTransitionEnd msTransitionEnd transitionend"),$(o._lBody).addClass("is-padding-arrow")}):$(o._lBody).removeClass("is-padding-arrow"))}),$(o._subMenu).on("click",function(){"Mobile"===projects.device()&&$(this).toggleClass("is-curr")}),$(o._video).on("click",function(){if($(this).parents(".owl-item").hasClass("active")){var t=$(this).find(".m-youtube-append").attr("id").split("m-youtube-")[1];1!==projects._media._player[t].getPlayerState()?($(this).removeClass("is-pause"),$(this).parent().attr("data-media",$(this).parent().attr("data-media").replace(/autoplay=0/,"autoplay=1")),projects._media._player[t].playVideo()):($(this).addClass("is-pause"),$(this).parent().attr("data-media",$(this).parent().attr("data-media").replace(/autoplay=1/,"autoplay=0")),projects._media._player[t].pauseVideo())}}),$(o._mute).on("click",function(){var t=$(this).prev().prev(o._video).find(".m-youtube-append").attr("id").split("m-youtube-")[1];$(this).hasClass("is-mute")?($(this).removeClass("is-mute"),projects._media._player[t].unMute()):($(this).addClass("is-mute"),projects._media._player[t].mute())}),$(o._tab).on("click",function(){var t=$(this).parent().index();$(this).addClass("is-curr").parent().siblings().find(o._tab).removeClass("is-curr"),$(this).parents(".m-tab-wrap").siblings(".m-tab-content").children(".content-list").eq(t).addClass("is-curr").siblings().removeClass("is-curr"),$(this).attr("data-hushtag")!==s&&history.pushState!==s&&history.pushState("",e.title,projects._HREF.split("#")[0]+"#"+$(this).attr("data-hushtag"))}),$(o._like+", "+o._calendar).on("click",function(){var t=$(this),e=t.data("bind");""!==e&&e!==s?$(o._like).each(function(){e===$(this).data("bind")&&$(this).toggleClass("is-add")}):t.toggleClass("is-add")}),$(o._btnAccordion).on("click",function(){$(this).parents(".m-accordion").toggleClass("is-open"),"PC"===projects.device()&&$(this).parents(".m-accordion").siblings().removeClass("is-open"),$(this).attr("data-hushtag")!==s&&history.pushState("",e.title,projects._HREF.split("&")[0]+"&"+$(this).attr("data-hushtag"))}),$(o._checkbox).on("click",function(){if($(this).data("select-all")===!0){var t=$(this).data("gruop-name");0===$(this).find('input[type="checkbox"]:checked').length?($(this).addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0),$('[data-select-name="'+t+'"]').addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0)):($(this).removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1),$('[data-select-name="'+t+'"]').removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1))}else 0===$(this).find('input[type="checkbox"]:checked').length?$(this).addClass("is-checked").find('input[type="checkbox"]').prop("checked",!0):$(this).removeClass("is-checked").find('input[type="checkbox"]').prop("checked",!1)}),$(o._radio).on("click",function(){if(0!==$(this).find('input[type="radio"]:checked').length){var t=$(this).find('input[type="radio"]:checked').attr("name");$('input[type="radio"][name="'+t+'"]').parents(o._radio).removeClass("is-checked"),$(this).addClass("is-checked")}$(this).parent().hasClass("deliver-method")&&("store"===$(this).find('input[type="radio"]').val()?$(this).parent().addClass("is-store"):$(this).parent().removeClass("is-store"))}),$(o._calc).on("click",function(){var t=parseInt($(this).siblings(".m-box-holder").find(".m-inputbox").val(),10);"minus"===$(this).data("calc")?t<=2?$(this).siblings(".m-box-holder").find(".m-inputbox").val(1):$(this).siblings(".m-box-holder").find(".m-inputbox").val(t-1):$(this).siblings(".m-box-holder").find(".m-inputbox").val(t+1)}),$(o._clearInput).on("click",function(){$(".jQ-clear-area .m-inputbox").val("")}),$(o._share).on("click",function(t){t.preventDefault(),o.openWin($(this))}),$(o._openBox).on("click",function(){$(o._lBody).addClass("show-lightbox"),o.offClick(".m-lightbox-content")}),$(o._closeBox).on("click",function(){o.closeBoxEvent()}),$(o._btnFunc).on("click",function(){$(this).hasClass("show-func")?$(this).removeClass("show-func"):($(".show-func").removeClass("show-func"),$(this).addClass("show-func")),$(this).data("sidebar-close")===!0&&$(o._sideMenu).removeClass("is-active"),"Mobile"===projects.device()&&("aside"===$(this).data("place")?$(this).parents(".function-list").addClass("hide-menu"):$(".quick-list .is-active").removeClass("is-active")),o.offClick(".popup-function")}),$(o._closePopup).on("click",function(){$(this).parents(".popup-function").prev().removeClass("show-func"),"Mobile"===projects.device()&&$(".function-list").removeClass("hide-menu")}),$(o._btnMarquee).on("click",function(){$(o._lBody).removeClass("show-marquee"),sessionStorage.setItem("marquee","readed"),"Mobile"===projects.device()&&$(o._lContent).css("padding-top","")}),$(o._sendMsg+" .btn-send").on("click",function(){o.sendServiceMsg()}),$(o._tagSelect).on("change","select",function(){""!==$(this).val()&&"javascript:;"!==$(this).val()&&"#"!==$(this).val()&&(t.location.href=$(this).val())}),projects.$d.keydown(function(t){27===t.keyCode&&$(o._lBody).hasClass("show-lightbox")&&o.closeBoxEvent(),13===t.keyCode&&$(".customer-service").prev().hasClass("show-func")&&o.sendServiceMsg()})}),projects.$w.on("scroll",function(){o.showFooter(),o.pauseVideo()}),projects.$w.resize(function(){"Mobile"!==projects.device()?o.showFooter():0!==$(o._tagSelect).length&&"select"!==$(o._tagSelect).children().prop("tagName").toLowerCase()&&o.changeToSelect()}),t.common||(t.common=o)}(window,document,$);